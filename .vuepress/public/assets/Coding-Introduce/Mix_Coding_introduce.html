<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Coding-Introduce</title>
    <style id="Rstyle">
      * {
        margin: 0;
        padding: 0;
      }

      * {
        box-sizing: border-box;
      }

      *::before {
        box-sizing: border-box;
      }

      *::after {
        box-sizing: border-box;
      }

      #app {
        font-family: "Avenir", Helvetica, Arial, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      html {
        min-height: 100vh;
      }

      .htmlMode {
        animation: flip 2s;
      }

      @keyframes flip {
        from {
          opacity: 0;
        }

        to {
          opacity: 1;
        }
      }
    </style>
    <script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.13/vue.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/marked/0.3.5/marked.min.js"></script>
    <script src="prism.js"></script>
  </head>

  <body>
    <div id="app">
      <div class="styleEditor" ref="styleEditor">
        <pre>
          <code v-html="heightLightCode" class="language-css"></code>
        </pre>
        <div style="display: none" v-html="styleCode"></div>
      </div>
      <div
        class="resumeEditor"
        :class="{htmlMode:enableHtml}"
        ref="resumeEditor"
      >
        <div v-if="enableHtml" v-html="Markdown"></div>
        <pre v-else v-html="Markdown"></pre>
      </div>
    </div>
    <script>
      let vm = new Vue({
        el: "#app",
        data: {
          width: 0, //åˆ¤æ–­æœºå‹
          interval: 40,
          currentStyle: "",
          enableHtml: false, //ç”¨æ˜¯å¦è½¬æ¢markdown
          fullStyle: [],
          fullPStyle: [
            `
      /*
      * ä½ ä»¬å¥½å•Š,æˆ‘æ˜¯ç»ƒä¹ æ—¶é•¿ğŸ”ä¸¤å¹´åŠçš„......
      * ä¸ä¸ä¸,æˆ‘æ˜¯ä¸€ä¸ªä¸€åªæƒ³å˜æˆå¤§ä½¬çš„å°ç™½ yaozongbin ğŸ±â€ğŸ‘¤
      * ç›®å‰å…´è¶£æ˜¯å‰ç«¯å¼€å‘,ä»Šå¤©æ¯”è¾ƒæ— èŠ,æ‰€ä»¥æˆ‘å°±åšä¸€å¼ ä¸ªäººç®€å†ä»‹ç»ä¸€ä¸‹æˆ‘è‡ªå·±å§å˜¿å˜¿å˜¿~~~
      * å®¹æˆ‘æ”¹é€ ä¸€ä¸‹ç¯å¢ƒğŸ‘‡
      */
      /* é¦–å…ˆç»™æ‰€æœ‰å…ƒç´ åŠ ä¸Šè¿‡æ¸¡æ•ˆæœ */
      * {
        transition: all .3s;
      }

      /* ç™½è‰²èƒŒæ™¯å¤ªå•è°ƒäº†ï¼ŒåŠ ç‚¹èƒŒæ™¯å‘— */
      html {
        color: rgb(222,222,222);
        background: rgb(0,43,54);
      }

      /* æ–‡å­—ç¦»è¾¹æ¡†å¤ªè¿‘äº†,ä¸€ç‚¹ä¸å¥½çœ‹ */
      .styleEditor {
        padding: .5em;
        border: 1px solid;
        margin: .5em;
        overflow: auto;
        width: 45vw; height: 90vh;
      }

      /* ä»£ç éƒ½åŒºåˆ†ä¸å¼€äº†,å¼€å¯é«˜äº®æ¨¡å¼ */
      .token.selector{ color: rgb(133,153,0); }
      .token.property{ color: rgb(187,137,0); }
      .token.punctuation{ color: yellow; }
      .token.function{ color: rgb(42,161,152); }

      /* åŠ ç‚¹3Dæ•ˆæœæ¶¨æ¶¨Bæ ¼ */
      html{
        perspective: 1000px;
      }
      .styleEditor {
        position: fixed; left: 0; top: 0;
        -webkit-transition: none;
        transition: none;
        -webkit-transform: rotateY(10deg) translateZ(-100px) ;
                transform: rotateY(10deg) translateZ(-100px) ;
      }`,
            `
      /* å†æ¥å‡†å¤‡ä¸€å¼ çº¸ */
      .resumeEditor{
        position: fixed; right: 0; top: 0;
        padding: .5em;  margin: .5em;
        width: 48vw; height: 90vh;
        border: 1px solid;
        background: white; color: #222;
        overflow: auto;
      }
      /* å¥½äº†ï¼Œæˆ‘å¼€å§‹ä»‹ç»äº† */
                `,
            `
      /*
       * å¥½åƒå·®ç‚¹å‘³é“å‘€......ä¸å¦‚æ”¾ç‚¹è°ƒå‘³æ–™?
       * emmm....å¥½å§å…¶å®è¿™æ˜¯markdownæ ¼å¼çš„å†…å®¹,è½¬æ¢ä¸€ä¸‹å§
       */
      `,
            `
      /*
        å“ˆå“ˆ,markdownè½¬æ¢å™¨çœŸå¥½ç”¨
        å†æ¥å¯¹é‡Œé¢åŠ ç‚¹æ ·å¼
      */
      .resumeEditor{
        padding: 2em;
      }
      .resumeEditor h2{
        display: inline-block;
        border-bottom: 1px solid;
        margin: 1em 0 .5em;
      }
      .resumeEditor strong{
        margin-right:.2em;
      }
      `,
            `
      /* ä»”ç»†æƒ³äº†ä¸‹è¿˜æ˜¯æ§åˆ¶å°éœ€è¦ä¸€ä¸ªä¸»é¢˜,é‚£ä¹ˆ.... */
      `,
            `
       /* æ€ä¹ˆæ ·?å¾ˆç¥å¥‡å§ã€‚å¥½äº†,å‰©ä¸‹çš„äº¤ç»™ä½ ä»¬çœ‹å¥½äº† */
      `,
          ],
          fullMStyle: [
            `
     /*
     * ä½ ä»¬å¥½å•Š,æˆ‘æ˜¯ç»ƒä¹ æ—¶é•¿ğŸ”ä¸¤å¹´åŠçš„......
      * ä¸ä¸ä¸,æˆ‘æ˜¯ä¸€ä¸ªä¸€åªæƒ³å˜æˆå¤§ä½¬çš„å°ç™½ yaozongbin ğŸ±â€ğŸ‘¤
      * ç›®å‰å…´è¶£æ˜¯å‰ç«¯å¼€å‘,ä»Šå¤©æ¯”è¾ƒæ— èŠ,æ‰€ä»¥æˆ‘å°±åšä¸€å¼ ä¸ªäººç®€å†ä»‹ç»ä¸€ä¸‹æˆ‘è‡ªå·±å§å˜¿å˜¿å˜¿~~~
      * å®¹æˆ‘æ”¹é€ ä¸€ä¸‹ç¯å¢ƒğŸ‘‡
      */

      /* é¦–å…ˆç»™æ‰€æœ‰å…ƒç´ åŠ ä¸Šè¿‡æ¸¡æ•ˆæœ */
      * {
        transition: all .3s;
      }

      /* ç™½è‰²èƒŒæ™¯å¤ªå•è°ƒäº†ï¼ŒåŠ ç‚¹èƒŒæ™¯å‘— */
      html {
        color: rgb(222,222,222);
        background: rgb(0,43,54);
      }

      /* æ–‡å­—ç¦»è¾¹æ¡†å¤ªè¿‘äº† */
      .styleEditor {
        padding: .5em;
        border: 1px solid;
        overflow: auto;
        width: 90vw;
        margin: 2.5vh 5vw;
        height: 90vh;
      }
     /* è¿™ç•Œé¢æœ‰ç‚¹å¤§å•Š */
       .styleEditor {
         height: 45vh;
       }
    /* ä»£ç éƒ½åŒºåˆ†ä¸å¼€äº†,å¼€å¯é«˜äº®æ¨¡å¼ */
       .token.selector{
          color: rgb(133,153,0);
       }
       .token.property{
          color: rgb(187,137,0);
       }
        .token.punctuation{
            color: yellow;
       }
        .token.function{
            color: rgb(42,161,152);
       }

        /* åŠ ç‚¹3Dæ•ˆæœæ¶¨æ¶¨Bæ ¼ */
        html{
            perspective: 1000px;
        }
        .styleEditor {
            position: fixed;
            left: 0;
            top: 0;
            transform: rotateX(-10deg) translateZ(-50px) ;
        }`,
            `
        /* å†æ¥å‡†å¤‡ä¸€å¼ çº¸ */
        .resumeEditor{
            position: fixed;
            top: 50%;
            left: 0;
            padding: .5em;
            margin: 2.5vh;
            width: 95vw;
            height: 45vh;
            border: 1px solid;
            background: white;
            color: #222;
            overflow: auto;
        }
        /* å¥½äº†ï¼Œæˆ‘å¼€å§‹ä»‹ç»äº† */

    `,
            `
      /*
       * å¥½åƒå·®ç‚¹å‘³é“å‘€......ä¸å¦‚æ”¾ç‚¹è°ƒå‘³æ–™?
       * emmm....å¥½å§å…¶å®è¿™æ˜¯markdownæ ¼å¼çš„å†…å®¹
       * è½¬æ¢ä¸€ä¸‹å§
       */
      `,
            `
      /*
        å“ˆå“ˆ,markdownè½¬æ¢å™¨çœŸå¥½ç”¨
        å†æ¥å¯¹é‡Œé¢åŠ ç‚¹æ ·å¼
      */
      .resumeEditor{
        padding: 2em;
      }
      .resumeEditor h2{
        display: inline-block;
        border-bottom: 1px solid;
        margin: 1em 0 .5em;
      }
      .resumeEditor strong{
        margin-right:.2em;
      }
      `,
            `
      /* ä»”ç»†æƒ³äº†ä¸‹è¿˜æ˜¯æ§åˆ¶å°éœ€è¦ä¸€ä¸ªä¸»é¢˜,é‚£ä¹ˆ.... */
      `,
            `
       /* æ€ä¹ˆæ ·?å¾ˆç¥å¥‡å§ã€‚å¥½äº†,é‚£ä¹ˆå‰©ä¸‹çš„å°±äº¤ç»™ä½ ä»¬äº† */
      `,
          ],
          theme: `<link href="https://cdn.bootcdn.net/ajax/libs/prism/1.16.0/themes/prism.min.css" rel="stylesheet">`,
          currentMarkdown: "",
          fullMarkdown: `
  ## ä¸ªäººèµ„æ–™

  **å§“å:**yaozongbin

  **å¹´é¾„:**22

  **å­¦å†:**å¤§ä¸‰

  **ä¸“ä¸š:**è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯

  **åœ¨è¯»å­¦æ ¡:**å¹¿è¥¿xxå¤§å­¦xxå­¦é™¢

  **å­¦ä¹ æ–¹å‘:**webå‰ç«¯(å‘å…¨æ ˆæ–¹å‘çœ‹é½ï¼ï¼ï¼)



  ## ä¸“ä¸šæŠ€èƒ½

  - H5ç‰¹æ•ˆå¼€å‘
  - Vue.jså‰ç«¯å¼€å‘
  - å¾®ä¿¡å°ç¨‹åºå¼€å‘
  - Node.jsåç«¯å¼€å‘



  ## æ­£åœ¨å­¦ä¹ 

  - Vue+Node.jså…¨æ ˆå¼€å‘
  - React.jsã€React-Nativeã€Angular.jsç­‰
  - JAVAã€Mysqlç­‰å¤§å­¦å¿…ä¿®è¯¾
  - æ€è€ƒäººç”Ÿ(emmm.....)



  ## å¤§å‹é¡¹ç›®

  åˆ«çœ‹äº†,ç›®å‰è¿˜æ²¡æœ‰-_-!!



  ## å…´è¶£çˆ±å¥½

  æ•²ä»£ç ã€ç¡è§‰ã€å¹²é¥­ã€è¿åŠ¨......



  ## æ€»ç»“

  ç°åœ¨è¿˜æ˜¯ä¸ªèœé¸¡,å¸Œæœ›å½’æ¥æ—¶æœ‰æ‰€è¿›æ­¥å§.........

    `,
        },
        methods: {
          //å·¥å…·å‡½æ•°
          goStyleBottom() {
            this.$refs.styleEditor.scrollTop = 100000;
          },
          goResumeBottom() {
            this.$refs.resumeEditor.scrollTop = 100000;
          },
          async showRender() {
            await this.styleRender(0);
            await this.styleRender(1);
            await this.resumeRender();
            await this.styleRender(2);
            await this.showHTML();
            await this.styleRender(3);
            if (this.width > 500) {
              await this.styleRender(4);
              await new Promise((resolve, reject) => {
                setTimeout(this.showTheme.bind(this, resolve), 1000);
              });
              await new Promise((resolve, reject) => {
                this.goStyleBottom();
                this.interval = 100;
                resolve();
              });
            }

            await setTimeout(this.styleRender, 1000, 5);
          },
          styleRender(n) {
            return new Promise((resolve, reject) => {
              let interval = this.interval;
              let showStyle = async () => {
                let style = this.fullStyle[n];
                if (!style) {
                  return;
                }
                // è®¡ç®—å‰ n ä¸ª style çš„å­—ç¬¦æ€»æ•°
                let length = this.fullStyle
                  .filter((_, index) => index <= n)
                  .map((item) => item.length)
                  .reduce((p, c) => p + c, 0);
                let prefixLength = length - style.length;
                if (this.currentStyle.length < length) {
                  let l = this.currentStyle.length - prefixLength;
                  let char = style.substring(l, l + 1) || " ";
                  this.currentStyle += char;
                  if (
                    style.substring(l - 1, l) === "\n" &&
                    this.$refs.styleEditor
                  ) {
                    this.$nextTick(() => {
                      this.goStyleBottom();
                    });
                  }
                  setTimeout(showStyle, interval); //å¾ªç¯è°ƒç”¨,ç›¸å½“äºå®šæ—¶å™¨
                } else {
                  resolve(); //promiseè¿”å›
                }
              };
              showStyle();
            });
          },
          showTheme(callback) {
            let header = document.getElementById("header");
            let Rstyle = document.getElementById("Rstyle");
            let link = document.createElement("link");
            link.setAttribute("rel", "stylesheet");
            link.setAttribute("href", "./css/prism.css");
            header.insertBefore(link, Rstyle);
            callback();
          },
          resumeRender() {
            return new Promise((resolve, reject) => {
              let length = this.fullMarkdown.length;
              let interval = this.interval;
              let showResume = () => {
                if (this.currentMarkdown.length < length) {
                  this.currentMarkdown = this.fullMarkdown.substring(
                    0,
                    this.currentMarkdown.length + 1
                  );
                  let lastChar =
                    this.currentMarkdown[this.currentMarkdown.length - 1];
                  let prevChar =
                    this.currentMarkdown[this.currentMarkdown.length - 2];
                  if (prevChar === "\n" && this.$refs.resumeEditor) {
                    this.$nextTick(() => this.goResumeBottom());
                  }
                  setTimeout(showResume, interval);
                } else {
                  resolve();
                }
              };
              showResume();
            });
          },
          showHTML() {
            return new Promise((resolve, reject) => {
              this.enableHtml = true;
              resolve();
            });
          },
        },
        computed: {
          heightLightCode() {
            return Prism.highlight(this.currentStyle, Prism.languages.css);
          },
          styleCode() {
            return `<style>${this.currentStyle}</style>`;
          },
          Markdown() {
            return this.enableHtml
              ? marked(this.fullMarkdown)
              : this.currentMarkdown;
          },
        },
        created() {
          this.width = document.documentElement.clientWidth;
          this.fullStyle = this.width > 500 ? this.fullPStyle : this.fullMStyle;
        },
        mounted() {
          this.showRender();
        },
      });
    </script>
  </body>
</html>
